// Generated by BUCKLESCRIPT VERSION 3.1.5, PLEASE EDIT WITH CARE
'use strict';

var $$Array = require("bs-platform/lib/js/array.js");
var Block = require("bs-platform/lib/js/block.js");
var Json_decode = require("@glennsl/bs-json/src/Json_decode.bs.js");
var Env$ReactTemplate = require("../Env.js");

function decode(json) {
  return /* record */[
          /* id */Json_decode.field("id", Json_decode.$$int, json),
          /* text */Json_decode.field("text", Json_decode.string, json),
          /* created */Json_decode.field("created", Json_decode.$$int, json),
          /* parentId */Json_decode.field("parent_id", Json_decode.$$int, json),
          /* parentAuthor */Json_decode.field("parent_author", Json_decode.string, json)
        ];
}

function fetch(eos, author, lowerBound, upperBound, $staropt$star) {
  var limit = $staropt$star ? $staropt$star[0] : 50;
  return eos.getTableRows(true, Env$ReactTemplate.codeName, author, "posts", "id", lowerBound, upperBound, limit).then((function (result) {
                console.log("options", lowerBound, upperBound);
                console.log("post data result", result);
                return Promise.resolve(/* Success */Block.__(0, [
                              $$Array.map(decode, result.rows),
                              result.more
                            ]));
              }));
}

exports.decode = decode;
exports.fetch = fetch;
/* Env-ReactTemplate Not a pure module */
