webpackHotUpdate("main",{

/***/ "./src/website/Components/App.js":
/*!***************************************!*\
  !*** ./src/website/Components/App.js ***!
  \***************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/* WEBPACK VAR INJECTION */(function(global) {// Generated by BUCKLESCRIPT VERSION 3.1.5, PLEASE EDIT WITH CARE


var Block = __webpack_require__(/*! bs-platform/lib/js/block.js */ "./node_modules/bs-platform/lib/js/block.js");
var Curry = __webpack_require__(/*! bs-platform/lib/js/curry.js */ "./node_modules/bs-platform/lib/js/curry.js");
var React = __webpack_require__(/*! react */ "./node_modules/react/index.js");
var Caml_array = __webpack_require__(/*! bs-platform/lib/js/caml_array.js */ "./node_modules/bs-platform/lib/js/caml_array.js");
var ApolloLinks = __webpack_require__(/*! reason-apollo/src/ApolloLinks.bs.js */ "./node_modules/reason-apollo/src/ApolloLinks.bs.js");
var ReasonReact = __webpack_require__(/*! reason-react/src/ReasonReact.js */ "./node_modules/reason-react/src/ReasonReact.js");
var TypedGlamor = __webpack_require__(/*! bs-typed-glamor/src/TypedGlamor.bs.js */ "./node_modules/bs-typed-glamor/src/TypedGlamor.bs.js");
var ReasonApollo = __webpack_require__(/*! reason-apollo/src/ReasonApollo.bs.js */ "./node_modules/reason-apollo/src/ReasonApollo.bs.js");
var ApolloProvider = __webpack_require__(/*! reason-apollo/src/ApolloProvider.bs.js */ "./node_modules/reason-apollo/src/ApolloProvider.bs.js");
var Api$ReactTemplate = __webpack_require__(/*! ../Api.js */ "./src/website/Api.js");
var Env$ReactTemplate = __webpack_require__(/*! ../Env/Env.js */ "./src/website/Env/Env.js");
var Link$ReactTemplate = __webpack_require__(/*! ./Link.js */ "./src/website/Components/Link.js");
var ApolloInMemoryCache = __webpack_require__(/*! reason-apollo/src/ApolloInMemoryCache.bs.js */ "./node_modules/reason-apollo/src/ApolloInMemoryCache.bs.js");
var Route$ReactTemplate = __webpack_require__(/*! ../Route.js */ "./src/website/Route.js");
var Helmet$ReactTemplate = __webpack_require__(/*! ../External/Helmet.js */ "./src/website/External/Helmet.js");
var Context$ReactTemplate = __webpack_require__(/*! ../Context.js */ "./src/website/Context.js");
var Scatter$ReactTemplate = __webpack_require__(/*! ../External/Scatter.js */ "./src/website/External/Scatter.js");
var HomePage$ReactTemplate = __webpack_require__(/*! ../Pages/HomePage.js */ "./src/website/Pages/HomePage.js");
var PollPage$ReactTemplate = __webpack_require__(/*! ../Pages/PollPage.js */ "./src/website/Pages/PollPage.js");
var AboutPage$ReactTemplate = __webpack_require__(/*! ../Pages/AboutPage.js */ "./src/website/Pages/AboutPage.js");
var AppStyles$ReactTemplate = __webpack_require__(/*! ../Styles/AppStyles.js */ "./src/website/Styles/AppStyles.js");
var ProfilePage$ReactTemplate = __webpack_require__(/*! ../Pages/ProfilePage.js */ "./src/website/Pages/ProfilePage.js");
var PollResultsPage$ReactTemplate = __webpack_require__(/*! ../Pages/PollResultsPage.js */ "./src/website/Pages/PollResultsPage.js");

var temp = ( global.Eos = __webpack_require__(/*! eosjs */ "./node_modules/eosjs/lib/index.js") );

function reducer(action, state) {
  switch (action.tag | 0) {
    case 0 : 
        return /* Update */Block.__(0, [/* record */[
                    /* context */state[/* context */0],
                    /* route */action[0]
                  ]]);
    case 1 : 
        var init = state[/* context */0];
        return /* Update */Block.__(0, [/* record */[
                    /* context : record */[
                      /* scatter */init[/* scatter */0],
                      /* identity */action[0],
                      /* language */init[/* language */2]
                    ],
                    /* route */state[/* route */1]
                  ]]);
    case 2 : 
        var scatter = action[0];
        var init$1 = state[/* context */0];
        return /* Update */Block.__(0, [/* record */[
                    /* context : record */[
                      /* scatter : Some */[scatter],
                      /* identity */Scatter$ReactTemplate.identity(scatter),
                      /* language */init$1[/* language */2]
                    ],
                    /* route */state[/* route */1]
                  ]]);
    
  }
}

var component = ReasonReact.reducerComponent("App");

function clickedLogin(self, scatter, _) {
  Scatter$ReactTemplate.getIdentity(scatter, /* Some */[/* array */[Env$ReactTemplate.network]], /* None */0, /* None */0, /* () */0).then((function (identity) {
          console.log(identity);
          Curry._1(self[/* send */3], /* ChangeIdentity */Block.__(1, [/* Some */[identity]]));
          return Promise.resolve(/* () */0);
        }));
  return /* () */0;
}

function clickedLogout(self, scatter, _) {
  Scatter$ReactTemplate.forgetIdentity(scatter).then((function () {
          Curry._1(self[/* send */3], /* ChangeIdentity */Block.__(1, [/* None */0]));
          return Promise.resolve(/* () */0);
        }));
  return /* () */0;
}

function make($staropt$star, $staropt$star$1, _) {
  var isServer = $staropt$star ? $staropt$star[0] : false;
  var route = $staropt$star$1 ? $staropt$star$1[0] : /* Home */0;
  return /* record */[
          /* debugName */component[/* debugName */0],
          /* reactClassInternal */component[/* reactClassInternal */1],
          /* handedOffState */component[/* handedOffState */2],
          /* willReceiveProps */component[/* willReceiveProps */3],
          /* didMount */(function (self) {
              return Scatter$ReactTemplate.onLoad((function () {
                            var match = window.scatter;
                            if (match == null) {
                              return /* () */0;
                            } else {
                              Curry._1(self[/* send */3], /* ScatterLoaded */Block.__(2, [match]));
                              Api$ReactTemplate.Contract[/* make */0](match).then((function () {
                                        return Promise.resolve(/* () */0);
                                      })).then((function (result) {
                                      console.log("Created", result);
                                      return Promise.resolve(/* () */0);
                                    }));
                              return /* () */0;
                            }
                          }));
            }),
          /* didUpdate */component[/* didUpdate */5],
          /* willUnmount */component[/* willUnmount */6],
          /* willUpdate */component[/* willUpdate */7],
          /* shouldUpdate */component[/* shouldUpdate */8],
          /* render */(function (self) {
              var context = self[/* state */1][/* context */0];
              var inMemoryCache = ApolloInMemoryCache.createInMemoryCache(/* None */0, /* None */0, /* () */0);
              var httpLink = ApolloLinks.createHttpLink("http://localhost:3001/graphql", /* None */0, /* None */0, /* None */0, /* None */0, /* None */0, /* () */0);
              var client = ReasonApollo.createApolloClient(httpLink, inMemoryCache, /* Some */[isServer], /* None */0, /* None */0, /* None */0, /* () */0);
              var match = context[/* scatter */0];
              var tmp;
              if (match) {
                var scatter = match[0];
                var match$1 = context[/* identity */1];
                if (match$1) {
                  var name = Caml_array.caml_array_get(match$1[0].accounts, 0).name;
                  tmp = React.createElement("nav", {
                        className: TypedGlamor.toString(AppStyles$ReactTemplate.userNav)
                      }, ReasonReact.element(/* None */0, /* None */0, Link$ReactTemplate.make(/* Profile */Block.__(0, [name]), /* None */0, /* array */[name])), React.createElement("button", {
                            onClick: (function (param) {
                                return clickedLogout(self, scatter, param);
                              })
                          }, "Logout"));
                } else {
                  tmp = React.createElement("button", {
                        className: TypedGlamor.toString(AppStyles$ReactTemplate.loginLink),
                        onClick: (function (param) {
                            return clickedLogin(self, scatter, param);
                          })
                      }, "Login");
                }
              } else {
                tmp = React.createElement("a", {
                      href: "https://get-scatter.com/"
                    }, "Get Scatter");
              }
              var match$2 = self[/* state */1][/* route */1];
              var tmp$1;
              if (typeof match$2 === "number") {
                tmp$1 = match$2 === 0 ? ReasonReact.element(/* None */0, /* None */0, HomePage$ReactTemplate.make(context, /* array */[])) : ReasonReact.element(/* None */0, /* None */0, AboutPage$ReactTemplate.make(/* array */[]));
              } else {
                switch (match$2.tag | 0) {
                  case 0 : 
                      tmp$1 = ReasonReact.element(/* None */0, /* None */0, ProfilePage$ReactTemplate.make(context, match$2[0], /* array */[]));
                      break;
                  case 1 : 
                      tmp$1 = ReasonReact.element(/* None */0, /* None */0, PollPage$ReactTemplate.make(context, match$2[0], match$2[1], /* array */[]));
                      break;
                  case 2 : 
                      tmp$1 = ReasonReact.element(/* None */0, /* None */0, PollResultsPage$ReactTemplate.make(context, match$2[0], match$2[1], /* array */[]));
                      break;
                  
                }
              }
              return ReasonReact.element(/* None */0, /* None */0, ApolloProvider.make(client, /* array */[React.createElement("div", {
                                    className: TypedGlamor.toString(AppStyles$ReactTemplate.container)
                                  }, ReasonReact.element(/* None */0, /* None */0, Helmet$ReactTemplate.make(/* array */[
                                            React.createElement("html", {
                                                  prefix: "og: http://ogp.me/ns#"
                                                }),
                                            React.createElement("meta", {
                                                  content: "",
                                                  name: "description"
                                                }),
                                            React.createElement("meta", {
                                                  content: "width=device-width, initial-scale=1, shrink-to-fit=no",
                                                  name: "viewport"
                                                }),
                                            React.createElement("meta", {
                                                  content: "EOS Straw Poll",
                                                  property: "og:site_name"
                                                }),
                                            React.createElement("meta", {
                                                  content: "EOS Straw Poll",
                                                  property: "og:title"
                                                }),
                                            React.createElement("meta", {
                                                  content: "Straw polls on EOS!",
                                                  property: "og:description"
                                                }),
                                            React.createElement("meta", {
                                                  content: Route$ReactTemplate.toAbsolute(self[/* state */1][/* route */1]),
                                                  property: "og:url"
                                                })
                                          ])), React.createElement("header", {
                                        className: TypedGlamor.toString(AppStyles$ReactTemplate.header)
                                      }, ReasonReact.element(/* None */0, /* None */0, Link$ReactTemplate.make(/* Home */0, /* Some */[TypedGlamor.toString(AppStyles$ReactTemplate.appLogo)], /* array */["EOS Straw Poll"])), tmp), React.createElement("main", {
                                        className: TypedGlamor.toString(AppStyles$ReactTemplate.main)
                                      }, tmp$1), React.createElement("footer", {
                                        className: TypedGlamor.toString(AppStyles$ReactTemplate.footer)
                                      }, ReasonReact.element(/* None */0, /* None */0, Link$ReactTemplate.make(/* About */1, /* None */0, /* array */["About"]))))]));
            }),
          /* initialState */(function () {
              return /* record */[
                      /* context */Context$ReactTemplate.empty,
                      /* route */route
                    ];
            }),
          /* retainedProps */component[/* retainedProps */11],
          /* reducer */reducer,
          /* subscriptions */(function (self) {
              return /* :: */[
                      /* Sub */[
                        (function () {
                            return ReasonReact.Router[/* watchUrl */1]((function (url) {
                                          return Curry._1(self[/* send */3], /* ChangeRoute */Block.__(0, [Route$ReactTemplate.fromUrl(url)]));
                                        }));
                          }),
                        ReasonReact.Router[/* unwatchUrl */2]
                      ],
                      /* [] */0
                    ];
            }),
          /* jsElementWrapped */component[/* jsElementWrapped */14]
        ];
}

var Styles = 0;

exports.Styles = Styles;
exports.temp = temp;
exports.reducer = reducer;
exports.component = component;
exports.clickedLogin = clickedLogin;
exports.clickedLogout = clickedLogout;
exports.make = make;
/* temp Not a pure module */

/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../../node_modules/webpack/buildin/global.js */ "./node_modules/webpack/buildin/global.js")))

/***/ }),

/***/ "./src/website/WebClient.js":
/*!**********************************!*\
  !*** ./src/website/WebClient.js ***!
  \**********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
// Generated by BUCKLESCRIPT VERSION 3.1.5, PLEASE EDIT WITH CARE


var ReactDOMRe = __webpack_require__(/*! reason-react/src/ReactDOMRe.js */ "./node_modules/reason-react/src/ReactDOMRe.js");
var ApolloLinks = __webpack_require__(/*! reason-apollo/src/ApolloLinks.bs.js */ "./node_modules/reason-apollo/src/ApolloLinks.bs.js");
var ReasonReact = __webpack_require__(/*! reason-react/src/ReasonReact.js */ "./node_modules/reason-react/src/ReasonReact.js");
var ReasonApollo = __webpack_require__(/*! reason-apollo/src/ReasonApollo.bs.js */ "./node_modules/reason-apollo/src/ReasonApollo.bs.js");
var ApolloProvider = __webpack_require__(/*! reason-apollo/src/ApolloProvider.bs.js */ "./node_modules/reason-apollo/src/ApolloProvider.bs.js");
var App$ReactTemplate = __webpack_require__(/*! ./Components/App.js */ "./src/website/Components/App.js");
var ApolloInMemoryCache = __webpack_require__(/*! reason-apollo/src/ApolloInMemoryCache.bs.js */ "./node_modules/reason-apollo/src/ApolloInMemoryCache.bs.js");

var inMemoryCache = ApolloInMemoryCache.createInMemoryCache(/* None */0, /* None */0, /* () */0);

var httpLink = ApolloLinks.createHttpLink("http://localhost:3001/graphql", /* None */0, /* None */0, /* None */0, /* None */0, /* None */0, /* () */0);

var client = ReasonApollo.createApolloClient(httpLink, inMemoryCache, /* Some */[true], /* None */0, /* None */0, /* None */0, /* () */0);

ReactDOMRe.hydrateToElementWithId(ReasonReact.element(/* None */0, /* None */0, ApolloProvider.make(client, /* array */[ReasonReact.element(/* None */0, /* None */0, App$ReactTemplate.make(/* None */0, /* None */0, /* array */[]))])), "app");

ReasonReact.Router[/* push */0]("");

exports.inMemoryCache = inMemoryCache;
exports.httpLink = httpLink;
exports.client = client;
/* inMemoryCache Not a pure module */


/***/ })

})
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvd2Vic2l0ZS9Db21wb25lbnRzL0FwcC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvd2Vic2l0ZS9XZWJDbGllbnQuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCO0FBQzdCO0FBQ0E7QUFDQTtBQUNBLHVDQUF1QztBQUN2QztBQUNBO0FBQ0EscUNBQXFDO0FBQ3JDO0FBQ0E7QUFDQSwyQkFBMkI7QUFDM0IsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QjtBQUN2QjtBQUNBO0FBQ0EsK0JBQStCO0FBQy9CLDJCQUEyQjtBQUMzQixpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkI7QUFDM0IsdUJBQXVCO0FBQ3ZCO0FBQ0EsZUFBZTtBQUNmO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWU7QUFDZjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQztBQUNuQztBQUNBO0FBQ0EsaURBQWlEO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBLGlEQUFpRDtBQUNqRDtBQUNBO0FBQ0E7QUFDQSxpREFBaUQ7QUFDakQ7QUFDQTtBQUNBO0FBQ0EsaURBQWlEO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBLGlEQUFpRDtBQUNqRDtBQUNBO0FBQ0E7QUFDQSxpREFBaUQ7QUFDakQ7QUFDQTtBQUNBO0FBQ0EsaURBQWlEO0FBQ2pEO0FBQ0E7QUFDQSx1Q0FBdUM7QUFDdkM7QUFDQSx1Q0FBdUM7QUFDdkM7QUFDQSx1Q0FBdUM7QUFDdkMsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlDQUF5QztBQUN6QywyQkFBMkI7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7O0FDdk9BO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoibWFpbi5jYzgxNTY3MmZjNjk1YTEzZDlhOS5ob3QtdXBkYXRlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8gR2VuZXJhdGVkIGJ5IEJVQ0tMRVNDUklQVCBWRVJTSU9OIDMuMS41LCBQTEVBU0UgRURJVCBXSVRIIENBUkVcbid1c2Ugc3RyaWN0JztcblxudmFyIEJsb2NrID0gcmVxdWlyZShcImJzLXBsYXRmb3JtL2xpYi9qcy9ibG9jay5qc1wiKTtcbnZhciBDdXJyeSA9IHJlcXVpcmUoXCJicy1wbGF0Zm9ybS9saWIvanMvY3VycnkuanNcIik7XG52YXIgUmVhY3QgPSByZXF1aXJlKFwicmVhY3RcIik7XG52YXIgQ2FtbF9hcnJheSA9IHJlcXVpcmUoXCJicy1wbGF0Zm9ybS9saWIvanMvY2FtbF9hcnJheS5qc1wiKTtcbnZhciBBcG9sbG9MaW5rcyA9IHJlcXVpcmUoXCJyZWFzb24tYXBvbGxvL3NyYy9BcG9sbG9MaW5rcy5icy5qc1wiKTtcbnZhciBSZWFzb25SZWFjdCA9IHJlcXVpcmUoXCJyZWFzb24tcmVhY3Qvc3JjL1JlYXNvblJlYWN0LmpzXCIpO1xudmFyIFR5cGVkR2xhbW9yID0gcmVxdWlyZShcImJzLXR5cGVkLWdsYW1vci9zcmMvVHlwZWRHbGFtb3IuYnMuanNcIik7XG52YXIgUmVhc29uQXBvbGxvID0gcmVxdWlyZShcInJlYXNvbi1hcG9sbG8vc3JjL1JlYXNvbkFwb2xsby5icy5qc1wiKTtcbnZhciBBcG9sbG9Qcm92aWRlciA9IHJlcXVpcmUoXCJyZWFzb24tYXBvbGxvL3NyYy9BcG9sbG9Qcm92aWRlci5icy5qc1wiKTtcbnZhciBBcGkkUmVhY3RUZW1wbGF0ZSA9IHJlcXVpcmUoXCIuLi9BcGkuanNcIik7XG52YXIgRW52JFJlYWN0VGVtcGxhdGUgPSByZXF1aXJlKFwiLi4vRW52L0Vudi5qc1wiKTtcbnZhciBMaW5rJFJlYWN0VGVtcGxhdGUgPSByZXF1aXJlKFwiLi9MaW5rLmpzXCIpO1xudmFyIEFwb2xsb0luTWVtb3J5Q2FjaGUgPSByZXF1aXJlKFwicmVhc29uLWFwb2xsby9zcmMvQXBvbGxvSW5NZW1vcnlDYWNoZS5icy5qc1wiKTtcbnZhciBSb3V0ZSRSZWFjdFRlbXBsYXRlID0gcmVxdWlyZShcIi4uL1JvdXRlLmpzXCIpO1xudmFyIEhlbG1ldCRSZWFjdFRlbXBsYXRlID0gcmVxdWlyZShcIi4uL0V4dGVybmFsL0hlbG1ldC5qc1wiKTtcbnZhciBDb250ZXh0JFJlYWN0VGVtcGxhdGUgPSByZXF1aXJlKFwiLi4vQ29udGV4dC5qc1wiKTtcbnZhciBTY2F0dGVyJFJlYWN0VGVtcGxhdGUgPSByZXF1aXJlKFwiLi4vRXh0ZXJuYWwvU2NhdHRlci5qc1wiKTtcbnZhciBIb21lUGFnZSRSZWFjdFRlbXBsYXRlID0gcmVxdWlyZShcIi4uL1BhZ2VzL0hvbWVQYWdlLmpzXCIpO1xudmFyIFBvbGxQYWdlJFJlYWN0VGVtcGxhdGUgPSByZXF1aXJlKFwiLi4vUGFnZXMvUG9sbFBhZ2UuanNcIik7XG52YXIgQWJvdXRQYWdlJFJlYWN0VGVtcGxhdGUgPSByZXF1aXJlKFwiLi4vUGFnZXMvQWJvdXRQYWdlLmpzXCIpO1xudmFyIEFwcFN0eWxlcyRSZWFjdFRlbXBsYXRlID0gcmVxdWlyZShcIi4uL1N0eWxlcy9BcHBTdHlsZXMuanNcIik7XG52YXIgUHJvZmlsZVBhZ2UkUmVhY3RUZW1wbGF0ZSA9IHJlcXVpcmUoXCIuLi9QYWdlcy9Qcm9maWxlUGFnZS5qc1wiKTtcbnZhciBQb2xsUmVzdWx0c1BhZ2UkUmVhY3RUZW1wbGF0ZSA9IHJlcXVpcmUoXCIuLi9QYWdlcy9Qb2xsUmVzdWx0c1BhZ2UuanNcIik7XG5cbnZhciB0ZW1wID0gKCBnbG9iYWwuRW9zID0gcmVxdWlyZSgnZW9zanMnKSApO1xuXG5mdW5jdGlvbiByZWR1Y2VyKGFjdGlvbiwgc3RhdGUpIHtcbiAgc3dpdGNoIChhY3Rpb24udGFnIHwgMCkge1xuICAgIGNhc2UgMCA6IFxuICAgICAgICByZXR1cm4gLyogVXBkYXRlICovQmxvY2suX18oMCwgWy8qIHJlY29yZCAqL1tcbiAgICAgICAgICAgICAgICAgICAgLyogY29udGV4dCAqL3N0YXRlWy8qIGNvbnRleHQgKi8wXSxcbiAgICAgICAgICAgICAgICAgICAgLyogcm91dGUgKi9hY3Rpb25bMF1cbiAgICAgICAgICAgICAgICAgIF1dKTtcbiAgICBjYXNlIDEgOiBcbiAgICAgICAgdmFyIGluaXQgPSBzdGF0ZVsvKiBjb250ZXh0ICovMF07XG4gICAgICAgIHJldHVybiAvKiBVcGRhdGUgKi9CbG9jay5fXygwLCBbLyogcmVjb3JkICovW1xuICAgICAgICAgICAgICAgICAgICAvKiBjb250ZXh0IDogcmVjb3JkICovW1xuICAgICAgICAgICAgICAgICAgICAgIC8qIHNjYXR0ZXIgKi9pbml0Wy8qIHNjYXR0ZXIgKi8wXSxcbiAgICAgICAgICAgICAgICAgICAgICAvKiBpZGVudGl0eSAqL2FjdGlvblswXSxcbiAgICAgICAgICAgICAgICAgICAgICAvKiBsYW5ndWFnZSAqL2luaXRbLyogbGFuZ3VhZ2UgKi8yXVxuICAgICAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgICAgICAvKiByb3V0ZSAqL3N0YXRlWy8qIHJvdXRlICovMV1cbiAgICAgICAgICAgICAgICAgIF1dKTtcbiAgICBjYXNlIDIgOiBcbiAgICAgICAgdmFyIHNjYXR0ZXIgPSBhY3Rpb25bMF07XG4gICAgICAgIHZhciBpbml0JDEgPSBzdGF0ZVsvKiBjb250ZXh0ICovMF07XG4gICAgICAgIHJldHVybiAvKiBVcGRhdGUgKi9CbG9jay5fXygwLCBbLyogcmVjb3JkICovW1xuICAgICAgICAgICAgICAgICAgICAvKiBjb250ZXh0IDogcmVjb3JkICovW1xuICAgICAgICAgICAgICAgICAgICAgIC8qIHNjYXR0ZXIgOiBTb21lICovW3NjYXR0ZXJdLFxuICAgICAgICAgICAgICAgICAgICAgIC8qIGlkZW50aXR5ICovU2NhdHRlciRSZWFjdFRlbXBsYXRlLmlkZW50aXR5KHNjYXR0ZXIpLFxuICAgICAgICAgICAgICAgICAgICAgIC8qIGxhbmd1YWdlICovaW5pdCQxWy8qIGxhbmd1YWdlICovMl1cbiAgICAgICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICAgICAgLyogcm91dGUgKi9zdGF0ZVsvKiByb3V0ZSAqLzFdXG4gICAgICAgICAgICAgICAgICBdXSk7XG4gICAgXG4gIH1cbn1cblxudmFyIGNvbXBvbmVudCA9IFJlYXNvblJlYWN0LnJlZHVjZXJDb21wb25lbnQoXCJBcHBcIik7XG5cbmZ1bmN0aW9uIGNsaWNrZWRMb2dpbihzZWxmLCBzY2F0dGVyLCBfKSB7XG4gIFNjYXR0ZXIkUmVhY3RUZW1wbGF0ZS5nZXRJZGVudGl0eShzY2F0dGVyLCAvKiBTb21lICovWy8qIGFycmF5ICovW0VudiRSZWFjdFRlbXBsYXRlLm5ldHdvcmtdXSwgLyogTm9uZSAqLzAsIC8qIE5vbmUgKi8wLCAvKiAoKSAqLzApLnRoZW4oKGZ1bmN0aW9uIChpZGVudGl0eSkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKGlkZW50aXR5KTtcbiAgICAgICAgICBDdXJyeS5fMShzZWxmWy8qIHNlbmQgKi8zXSwgLyogQ2hhbmdlSWRlbnRpdHkgKi9CbG9jay5fXygxLCBbLyogU29tZSAqL1tpZGVudGl0eV1dKSk7XG4gICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgvKiAoKSAqLzApO1xuICAgICAgICB9KSk7XG4gIHJldHVybiAvKiAoKSAqLzA7XG59XG5cbmZ1bmN0aW9uIGNsaWNrZWRMb2dvdXQoc2VsZiwgc2NhdHRlciwgXykge1xuICBTY2F0dGVyJFJlYWN0VGVtcGxhdGUuZm9yZ2V0SWRlbnRpdHkoc2NhdHRlcikudGhlbigoZnVuY3Rpb24gKCkge1xuICAgICAgICAgIEN1cnJ5Ll8xKHNlbGZbLyogc2VuZCAqLzNdLCAvKiBDaGFuZ2VJZGVudGl0eSAqL0Jsb2NrLl9fKDEsIFsvKiBOb25lICovMF0pKTtcbiAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKC8qICgpICovMCk7XG4gICAgICAgIH0pKTtcbiAgcmV0dXJuIC8qICgpICovMDtcbn1cblxuZnVuY3Rpb24gbWFrZSgkc3Rhcm9wdCRzdGFyLCAkc3Rhcm9wdCRzdGFyJDEsIF8pIHtcbiAgdmFyIGlzU2VydmVyID0gJHN0YXJvcHQkc3RhciA/ICRzdGFyb3B0JHN0YXJbMF0gOiBmYWxzZTtcbiAgdmFyIHJvdXRlID0gJHN0YXJvcHQkc3RhciQxID8gJHN0YXJvcHQkc3RhciQxWzBdIDogLyogSG9tZSAqLzA7XG4gIHJldHVybiAvKiByZWNvcmQgKi9bXG4gICAgICAgICAgLyogZGVidWdOYW1lICovY29tcG9uZW50Wy8qIGRlYnVnTmFtZSAqLzBdLFxuICAgICAgICAgIC8qIHJlYWN0Q2xhc3NJbnRlcm5hbCAqL2NvbXBvbmVudFsvKiByZWFjdENsYXNzSW50ZXJuYWwgKi8xXSxcbiAgICAgICAgICAvKiBoYW5kZWRPZmZTdGF0ZSAqL2NvbXBvbmVudFsvKiBoYW5kZWRPZmZTdGF0ZSAqLzJdLFxuICAgICAgICAgIC8qIHdpbGxSZWNlaXZlUHJvcHMgKi9jb21wb25lbnRbLyogd2lsbFJlY2VpdmVQcm9wcyAqLzNdLFxuICAgICAgICAgIC8qIGRpZE1vdW50ICovKGZ1bmN0aW9uIChzZWxmKSB7XG4gICAgICAgICAgICAgIHJldHVybiBTY2F0dGVyJFJlYWN0VGVtcGxhdGUub25Mb2FkKChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1hdGNoID0gd2luZG93LnNjYXR0ZXI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1hdGNoID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAvKiAoKSAqLzA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEN1cnJ5Ll8xKHNlbGZbLyogc2VuZCAqLzNdLCAvKiBTY2F0dGVyTG9hZGVkICovQmxvY2suX18oMiwgW21hdGNoXSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXBpJFJlYWN0VGVtcGxhdGUuQ29udHJhY3RbLyogbWFrZSAqLzBdKG1hdGNoKS50aGVuKChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgvKiAoKSAqLzApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSkudGhlbigoZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkNyZWF0ZWRcIiwgcmVzdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgvKiAoKSAqLzApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIC8qICgpICovMDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgIC8qIGRpZFVwZGF0ZSAqL2NvbXBvbmVudFsvKiBkaWRVcGRhdGUgKi81XSxcbiAgICAgICAgICAvKiB3aWxsVW5tb3VudCAqL2NvbXBvbmVudFsvKiB3aWxsVW5tb3VudCAqLzZdLFxuICAgICAgICAgIC8qIHdpbGxVcGRhdGUgKi9jb21wb25lbnRbLyogd2lsbFVwZGF0ZSAqLzddLFxuICAgICAgICAgIC8qIHNob3VsZFVwZGF0ZSAqL2NvbXBvbmVudFsvKiBzaG91bGRVcGRhdGUgKi84XSxcbiAgICAgICAgICAvKiByZW5kZXIgKi8oZnVuY3Rpb24gKHNlbGYpIHtcbiAgICAgICAgICAgICAgdmFyIGNvbnRleHQgPSBzZWxmWy8qIHN0YXRlICovMV1bLyogY29udGV4dCAqLzBdO1xuICAgICAgICAgICAgICB2YXIgaW5NZW1vcnlDYWNoZSA9IEFwb2xsb0luTWVtb3J5Q2FjaGUuY3JlYXRlSW5NZW1vcnlDYWNoZSgvKiBOb25lICovMCwgLyogTm9uZSAqLzAsIC8qICgpICovMCk7XG4gICAgICAgICAgICAgIHZhciBodHRwTGluayA9IEFwb2xsb0xpbmtzLmNyZWF0ZUh0dHBMaW5rKFwiaHR0cDovL2xvY2FsaG9zdDozMDAxL2dyYXBocWxcIiwgLyogTm9uZSAqLzAsIC8qIE5vbmUgKi8wLCAvKiBOb25lICovMCwgLyogTm9uZSAqLzAsIC8qIE5vbmUgKi8wLCAvKiAoKSAqLzApO1xuICAgICAgICAgICAgICB2YXIgY2xpZW50ID0gUmVhc29uQXBvbGxvLmNyZWF0ZUFwb2xsb0NsaWVudChodHRwTGluaywgaW5NZW1vcnlDYWNoZSwgLyogU29tZSAqL1tpc1NlcnZlcl0sIC8qIE5vbmUgKi8wLCAvKiBOb25lICovMCwgLyogTm9uZSAqLzAsIC8qICgpICovMCk7XG4gICAgICAgICAgICAgIHZhciBtYXRjaCA9IGNvbnRleHRbLyogc2NhdHRlciAqLzBdO1xuICAgICAgICAgICAgICB2YXIgdG1wO1xuICAgICAgICAgICAgICBpZiAobWF0Y2gpIHtcbiAgICAgICAgICAgICAgICB2YXIgc2NhdHRlciA9IG1hdGNoWzBdO1xuICAgICAgICAgICAgICAgIHZhciBtYXRjaCQxID0gY29udGV4dFsvKiBpZGVudGl0eSAqLzFdO1xuICAgICAgICAgICAgICAgIGlmIChtYXRjaCQxKSB7XG4gICAgICAgICAgICAgICAgICB2YXIgbmFtZSA9IENhbWxfYXJyYXkuY2FtbF9hcnJheV9nZXQobWF0Y2gkMVswXS5hY2NvdW50cywgMCkubmFtZTtcbiAgICAgICAgICAgICAgICAgIHRtcCA9IFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJuYXZcIiwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBUeXBlZEdsYW1vci50b1N0cmluZyhBcHBTdHlsZXMkUmVhY3RUZW1wbGF0ZS51c2VyTmF2KVxuICAgICAgICAgICAgICAgICAgICAgIH0sIFJlYXNvblJlYWN0LmVsZW1lbnQoLyogTm9uZSAqLzAsIC8qIE5vbmUgKi8wLCBMaW5rJFJlYWN0VGVtcGxhdGUubWFrZSgvKiBQcm9maWxlICovQmxvY2suX18oMCwgW25hbWVdKSwgLyogTm9uZSAqLzAsIC8qIGFycmF5ICovW25hbWVdKSksIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIiwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s6IChmdW5jdGlvbiAocGFyYW0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNsaWNrZWRMb2dvdXQoc2VsZiwgc2NhdHRlciwgcGFyYW0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgXCJMb2dvdXRcIikpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICB0bXAgPSBSZWFjdC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogVHlwZWRHbGFtb3IudG9TdHJpbmcoQXBwU3R5bGVzJFJlYWN0VGVtcGxhdGUubG9naW5MaW5rKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s6IChmdW5jdGlvbiAocGFyYW0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2xpY2tlZExvZ2luKHNlbGYsIHNjYXR0ZXIsIHBhcmFtKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICB9LCBcIkxvZ2luXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0bXAgPSBSZWFjdC5jcmVhdGVFbGVtZW50KFwiYVwiLCB7XG4gICAgICAgICAgICAgICAgICAgICAgaHJlZjogXCJodHRwczovL2dldC1zY2F0dGVyLmNvbS9cIlxuICAgICAgICAgICAgICAgICAgICB9LCBcIkdldCBTY2F0dGVyXCIpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHZhciBtYXRjaCQyID0gc2VsZlsvKiBzdGF0ZSAqLzFdWy8qIHJvdXRlICovMV07XG4gICAgICAgICAgICAgIHZhciB0bXAkMTtcbiAgICAgICAgICAgICAgaWYgKHR5cGVvZiBtYXRjaCQyID09PSBcIm51bWJlclwiKSB7XG4gICAgICAgICAgICAgICAgdG1wJDEgPSBtYXRjaCQyID09PSAwID8gUmVhc29uUmVhY3QuZWxlbWVudCgvKiBOb25lICovMCwgLyogTm9uZSAqLzAsIEhvbWVQYWdlJFJlYWN0VGVtcGxhdGUubWFrZShjb250ZXh0LCAvKiBhcnJheSAqL1tdKSkgOiBSZWFzb25SZWFjdC5lbGVtZW50KC8qIE5vbmUgKi8wLCAvKiBOb25lICovMCwgQWJvdXRQYWdlJFJlYWN0VGVtcGxhdGUubWFrZSgvKiBhcnJheSAqL1tdKSk7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChtYXRjaCQyLnRhZyB8IDApIHtcbiAgICAgICAgICAgICAgICAgIGNhc2UgMCA6IFxuICAgICAgICAgICAgICAgICAgICAgIHRtcCQxID0gUmVhc29uUmVhY3QuZWxlbWVudCgvKiBOb25lICovMCwgLyogTm9uZSAqLzAsIFByb2ZpbGVQYWdlJFJlYWN0VGVtcGxhdGUubWFrZShjb250ZXh0LCBtYXRjaCQyWzBdLCAvKiBhcnJheSAqL1tdKSk7XG4gICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICBjYXNlIDEgOiBcbiAgICAgICAgICAgICAgICAgICAgICB0bXAkMSA9IFJlYXNvblJlYWN0LmVsZW1lbnQoLyogTm9uZSAqLzAsIC8qIE5vbmUgKi8wLCBQb2xsUGFnZSRSZWFjdFRlbXBsYXRlLm1ha2UoY29udGV4dCwgbWF0Y2gkMlswXSwgbWF0Y2gkMlsxXSwgLyogYXJyYXkgKi9bXSkpO1xuICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgY2FzZSAyIDogXG4gICAgICAgICAgICAgICAgICAgICAgdG1wJDEgPSBSZWFzb25SZWFjdC5lbGVtZW50KC8qIE5vbmUgKi8wLCAvKiBOb25lICovMCwgUG9sbFJlc3VsdHNQYWdlJFJlYWN0VGVtcGxhdGUubWFrZShjb250ZXh0LCBtYXRjaCQyWzBdLCBtYXRjaCQyWzFdLCAvKiBhcnJheSAqL1tdKSk7XG4gICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgcmV0dXJuIFJlYXNvblJlYWN0LmVsZW1lbnQoLyogTm9uZSAqLzAsIC8qIE5vbmUgKi8wLCBBcG9sbG9Qcm92aWRlci5tYWtlKGNsaWVudCwgLyogYXJyYXkgKi9bUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6IFR5cGVkR2xhbW9yLnRvU3RyaW5nKEFwcFN0eWxlcyRSZWFjdFRlbXBsYXRlLmNvbnRhaW5lcilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBSZWFzb25SZWFjdC5lbGVtZW50KC8qIE5vbmUgKi8wLCAvKiBOb25lICovMCwgSGVsbWV0JFJlYWN0VGVtcGxhdGUubWFrZSgvKiBhcnJheSAqL1tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcImh0bWxcIiwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmVmaXg6IFwib2c6IGh0dHA6Ly9vZ3AubWUvbnMjXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFwibWV0YVwiLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IFwiXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IFwiZGVzY3JpcHRpb25cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJtZXRhXCIsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogXCJ3aWR0aD1kZXZpY2Utd2lkdGgsIGluaXRpYWwtc2NhbGU9MSwgc2hyaW5rLXRvLWZpdD1ub1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBcInZpZXdwb3J0XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFwibWV0YVwiLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IFwiRU9TIFN0cmF3IFBvbGxcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvcGVydHk6IFwib2c6c2l0ZV9uYW1lXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFwibWV0YVwiLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IFwiRU9TIFN0cmF3IFBvbGxcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvcGVydHk6IFwib2c6dGl0bGVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJtZXRhXCIsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogXCJTdHJhdyBwb2xscyBvbiBFT1MhXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb3BlcnR5OiBcIm9nOmRlc2NyaXB0aW9uXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFwibWV0YVwiLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IFJvdXRlJFJlYWN0VGVtcGxhdGUudG9BYnNvbHV0ZShzZWxmWy8qIHN0YXRlICovMV1bLyogcm91dGUgKi8xXSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb3BlcnR5OiBcIm9nOnVybFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXSkpLCBSZWFjdC5jcmVhdGVFbGVtZW50KFwiaGVhZGVyXCIsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6IFR5cGVkR2xhbW9yLnRvU3RyaW5nKEFwcFN0eWxlcyRSZWFjdFRlbXBsYXRlLmhlYWRlcilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgUmVhc29uUmVhY3QuZWxlbWVudCgvKiBOb25lICovMCwgLyogTm9uZSAqLzAsIExpbmskUmVhY3RUZW1wbGF0ZS5tYWtlKC8qIEhvbWUgKi8wLCAvKiBTb21lICovW1R5cGVkR2xhbW9yLnRvU3RyaW5nKEFwcFN0eWxlcyRSZWFjdFRlbXBsYXRlLmFwcExvZ28pXSwgLyogYXJyYXkgKi9bXCJFT1MgU3RyYXcgUG9sbFwiXSkpLCB0bXApLCBSZWFjdC5jcmVhdGVFbGVtZW50KFwibWFpblwiLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBUeXBlZEdsYW1vci50b1N0cmluZyhBcHBTdHlsZXMkUmVhY3RUZW1wbGF0ZS5tYWluKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCB0bXAkMSksIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJmb290ZXJcIiwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogVHlwZWRHbGFtb3IudG9TdHJpbmcoQXBwU3R5bGVzJFJlYWN0VGVtcGxhdGUuZm9vdGVyKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBSZWFzb25SZWFjdC5lbGVtZW50KC8qIE5vbmUgKi8wLCAvKiBOb25lICovMCwgTGluayRSZWFjdFRlbXBsYXRlLm1ha2UoLyogQWJvdXQgKi8xLCAvKiBOb25lICovMCwgLyogYXJyYXkgKi9bXCJBYm91dFwiXSkpKSldKSk7XG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICAvKiBpbml0aWFsU3RhdGUgKi8oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICByZXR1cm4gLyogcmVjb3JkICovW1xuICAgICAgICAgICAgICAgICAgICAgIC8qIGNvbnRleHQgKi9Db250ZXh0JFJlYWN0VGVtcGxhdGUuZW1wdHksXG4gICAgICAgICAgICAgICAgICAgICAgLyogcm91dGUgKi9yb3V0ZVxuICAgICAgICAgICAgICAgICAgICBdO1xuICAgICAgICAgICAgfSksXG4gICAgICAgICAgLyogcmV0YWluZWRQcm9wcyAqL2NvbXBvbmVudFsvKiByZXRhaW5lZFByb3BzICovMTFdLFxuICAgICAgICAgIC8qIHJlZHVjZXIgKi9yZWR1Y2VyLFxuICAgICAgICAgIC8qIHN1YnNjcmlwdGlvbnMgKi8oZnVuY3Rpb24gKHNlbGYpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIC8qIDo6ICovW1xuICAgICAgICAgICAgICAgICAgICAgIC8qIFN1YiAqL1tcbiAgICAgICAgICAgICAgICAgICAgICAgIChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFJlYXNvblJlYWN0LlJvdXRlclsvKiB3YXRjaFVybCAqLzFdKChmdW5jdGlvbiAodXJsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gQ3VycnkuXzEoc2VsZlsvKiBzZW5kICovM10sIC8qIENoYW5nZVJvdXRlICovQmxvY2suX18oMCwgW1JvdXRlJFJlYWN0VGVtcGxhdGUuZnJvbVVybCh1cmwpXSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgICAgICAgICBSZWFzb25SZWFjdC5Sb3V0ZXJbLyogdW53YXRjaFVybCAqLzJdXG4gICAgICAgICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICAgICAgICAvKiBbXSAqLzBcbiAgICAgICAgICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgIC8qIGpzRWxlbWVudFdyYXBwZWQgKi9jb21wb25lbnRbLyoganNFbGVtZW50V3JhcHBlZCAqLzE0XVxuICAgICAgICBdO1xufVxuXG52YXIgU3R5bGVzID0gMDtcblxuZXhwb3J0cy5TdHlsZXMgPSBTdHlsZXM7XG5leHBvcnRzLnRlbXAgPSB0ZW1wO1xuZXhwb3J0cy5yZWR1Y2VyID0gcmVkdWNlcjtcbmV4cG9ydHMuY29tcG9uZW50ID0gY29tcG9uZW50O1xuZXhwb3J0cy5jbGlja2VkTG9naW4gPSBjbGlja2VkTG9naW47XG5leHBvcnRzLmNsaWNrZWRMb2dvdXQgPSBjbGlja2VkTG9nb3V0O1xuZXhwb3J0cy5tYWtlID0gbWFrZTtcbi8qIHRlbXAgTm90IGEgcHVyZSBtb2R1bGUgKi9cbiIsIi8vIEdlbmVyYXRlZCBieSBCVUNLTEVTQ1JJUFQgVkVSU0lPTiAzLjEuNSwgUExFQVNFIEVESVQgV0lUSCBDQVJFXG4ndXNlIHN0cmljdCc7XG5cbnZhciBSZWFjdERPTVJlID0gcmVxdWlyZShcInJlYXNvbi1yZWFjdC9zcmMvUmVhY3RET01SZS5qc1wiKTtcbnZhciBBcG9sbG9MaW5rcyA9IHJlcXVpcmUoXCJyZWFzb24tYXBvbGxvL3NyYy9BcG9sbG9MaW5rcy5icy5qc1wiKTtcbnZhciBSZWFzb25SZWFjdCA9IHJlcXVpcmUoXCJyZWFzb24tcmVhY3Qvc3JjL1JlYXNvblJlYWN0LmpzXCIpO1xudmFyIFJlYXNvbkFwb2xsbyA9IHJlcXVpcmUoXCJyZWFzb24tYXBvbGxvL3NyYy9SZWFzb25BcG9sbG8uYnMuanNcIik7XG52YXIgQXBvbGxvUHJvdmlkZXIgPSByZXF1aXJlKFwicmVhc29uLWFwb2xsby9zcmMvQXBvbGxvUHJvdmlkZXIuYnMuanNcIik7XG52YXIgQXBwJFJlYWN0VGVtcGxhdGUgPSByZXF1aXJlKFwiLi9Db21wb25lbnRzL0FwcC5qc1wiKTtcbnZhciBBcG9sbG9Jbk1lbW9yeUNhY2hlID0gcmVxdWlyZShcInJlYXNvbi1hcG9sbG8vc3JjL0Fwb2xsb0luTWVtb3J5Q2FjaGUuYnMuanNcIik7XG5cbnZhciBpbk1lbW9yeUNhY2hlID0gQXBvbGxvSW5NZW1vcnlDYWNoZS5jcmVhdGVJbk1lbW9yeUNhY2hlKC8qIE5vbmUgKi8wLCAvKiBOb25lICovMCwgLyogKCkgKi8wKTtcblxudmFyIGh0dHBMaW5rID0gQXBvbGxvTGlua3MuY3JlYXRlSHR0cExpbmsoXCJodHRwOi8vbG9jYWxob3N0OjMwMDEvZ3JhcGhxbFwiLCAvKiBOb25lICovMCwgLyogTm9uZSAqLzAsIC8qIE5vbmUgKi8wLCAvKiBOb25lICovMCwgLyogTm9uZSAqLzAsIC8qICgpICovMCk7XG5cbnZhciBjbGllbnQgPSBSZWFzb25BcG9sbG8uY3JlYXRlQXBvbGxvQ2xpZW50KGh0dHBMaW5rLCBpbk1lbW9yeUNhY2hlLCAvKiBTb21lICovW3RydWVdLCAvKiBOb25lICovMCwgLyogTm9uZSAqLzAsIC8qIE5vbmUgKi8wLCAvKiAoKSAqLzApO1xuXG5SZWFjdERPTVJlLmh5ZHJhdGVUb0VsZW1lbnRXaXRoSWQoUmVhc29uUmVhY3QuZWxlbWVudCgvKiBOb25lICovMCwgLyogTm9uZSAqLzAsIEFwb2xsb1Byb3ZpZGVyLm1ha2UoY2xpZW50LCAvKiBhcnJheSAqL1tSZWFzb25SZWFjdC5lbGVtZW50KC8qIE5vbmUgKi8wLCAvKiBOb25lICovMCwgQXBwJFJlYWN0VGVtcGxhdGUubWFrZSgvKiBOb25lICovMCwgLyogTm9uZSAqLzAsIC8qIGFycmF5ICovW10pKV0pKSwgXCJhcHBcIik7XG5cblJlYXNvblJlYWN0LlJvdXRlclsvKiBwdXNoICovMF0oXCJcIik7XG5cbmV4cG9ydHMuaW5NZW1vcnlDYWNoZSA9IGluTWVtb3J5Q2FjaGU7XG5leHBvcnRzLmh0dHBMaW5rID0gaHR0cExpbms7XG5leHBvcnRzLmNsaWVudCA9IGNsaWVudDtcbi8qIGluTWVtb3J5Q2FjaGUgTm90IGEgcHVyZSBtb2R1bGUgKi9cbiJdLCJzb3VyY2VSb290IjoiIn0=